---
import "../styles/global.css";
import { ClientRouter } from "astro:transitions";
import Navigation from "../components/Navigation.astro";
import Footer from "../components/Footer.astro";
import EasterEgg from "../components/EasterEgg.astro";
import SavageMenu from "../components/SavageMenu.astro";
import DevToolsProtection from "../components/DevToolsProtection.astro";

interface Props {
  title: string;
  voidMode?: boolean;
}

const { title, voidMode = false } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Nony's Personal Portfolio & Blog" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/png" href="/logo.png" />
    <meta name="generator" content={Astro.generator} />

    <!-- Google Fonts: Fraunces (Serif), Outfit (Sans), Crimson Text (Writer), Fira Code (Dev) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&family=Fira+Code:wght@300..600&family=Fraunces:opsz,wght@9..144,300..700&family=Outfit:wght@300..700&display=swap"
      rel="stylesheet"
    />

    <!-- Flaticon UIcons (Regular Rounded) -->
    <link
      rel="stylesheet"
      href="https://cdn-uicons.flaticon.com/2.1.0/uicons-regular-rounded/css/uicons-regular-rounded.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn-uicons.flaticon.com/2.1.0/uicons-brands/css/uicons-brands.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <ClientRouter />

    <title>{title}</title>
  </head>
  <body class="theme-default">
    {!voidMode && <DevToolsProtection />}
    {!voidMode && <Navigation />}
    {!voidMode && <EasterEgg />}
    {!voidMode && <SavageMenu />}

    <div class="transition-wrapper">
      <slot />
    </div>

    {!voidMode && <Footer />}
    <script>
      // No icon re-init needed for CSS fonts
    </script>
  </body>
</html>

<style is:global>
  /* Page Transition Animations */
  ::view-transition-old(root) {
    animation: fade-out 0.3s cubic-bezier(0.4, 0, 0.2, 1) both;
  }
  ::view-transition-new(root) {
    animation: fade-in 0.3s cubic-bezier(0.4, 0, 0.2, 1) both;
  }

  @keyframes fade-out {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-10px);
    }
  }
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
